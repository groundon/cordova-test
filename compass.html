<!DOCTYPE html> 
<html> 
<head> 
	<title>Compass</title> 
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.css" />
	<link rel="stylesheet" type="text/css" href="style.css" />
	
	<script type="text/javascript" charset="utf-8" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
	<script type="text/javascript" charset="utf-8" src="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="cordova-2.5.0.js"></script>  
    <script type="text/javascript">

        $(document).ready (function() 
        {
			$("#label_title").text(document.title);
			
            $("#but_getCurrentHeading").attr("disabled", true);
			$("#but_getCurrentHeading").addClass("disabledButton");
			
			document.addEventListener("deviceready", onDeviceReady, false);
        });
        
        function onDeviceReady()
        {
            $("#but_getCurrentHeading").attr("disabled", false);
			$("#but_getCurrentHeading").removeClass("disabledButton");
        }
        
        function onclickGetCurrentHeading()
        {
            navigator.compass.getCurrentHeading(onSuccess, onError);
        }

        function onSuccess(heading) 
        {
            $("#span_heading").html("Heading: " + heading.magneticHeading);
        }
        function onError(compassError) 
        {
            alert('Compass Error: ' + compassError.code);
        }
    </script>
</head>

<body>
<div data-role="page" id="accelerometer">
    <div data-role="header" data-position="fixed">
        <a href="#" data-rel="back" data-role="button" data-icon="arrow-l" data-iconpos="left" data-inline="true">Back</a>
        <h1><label id="label_title"></label></h1>
    </div><!-- /header --> 
    
    <div data-role="content">
        <input type="button" id="but_getCurrentHeading" value="getCurrentHeading" onclick="onclickGetCurrentHeading();" />
        <span id="span_heading"></span>
    </div><!-- /content -->
</div> <!-- page -->
</body>
    
</html>